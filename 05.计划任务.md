
# 任务计划

* 1.指定的时间点执行一次特定的任务
* at/batch

* 2.周期性的执行某个任务
* crond：服务

```shell
at TIME
at>

ctrl+d


at 12：00

at有队列，每个队列用单独的英文字母

```

* -q：指定队列
* -l：查看等待执行的任务相当于atq
* -d：删除某等待执行的任务，相当于atrm

> at -f /path/to/file  TIME

> batch：不需要指定时间，会自动挑选系统空闲的时段执行系统任务计划。


#### 很多时候我们将系统执行的任务写成了脚本但是我们想让它们在特定的时间进行执行，于是就需要我们使用任务计划来实现此需求

```shell
1.在未来的某个时间点执行一次某任务
        at
        batch
        
        at：时间
        at>COMMAND
        at>Ctrl+d
        
        指定时间：
        绝对时间：HH:MM      DD.MM.YY        MM/DD/YY        

        相对时间：now+#
                单位：minutes，hours，days，weeks
        模糊时间：noon，midnight，teatime

命令的执行 ，将 以邮件的形式发送给安排任务的用户      
        
                10： 20结果
                now+3           表示从这一刻开始往后的3分钟以后
      
at now+3minutes            3分钟以后执行     
        
at -l                               可以显示自己的作业列表
                                   
at -l = atq

at -d                               表示删除任务
atrm                           同上

     
batch               空闲时间来执行任务

```

```shell        
2.周期性地执行某任务
        以服务的方式来进行监控
        cron：自身是一个不间断运行的服务
        anacron：cron的补充，能够实现让cron因为各种原因在过去的时间点该执行的但是却没有执行的服务，在恢复正常后执行一次
        
        cron：
                系统cron任务:
                        /etc/crontab                
                            分钟   小时    天   月   周     用户     任务                
                用户cron任务:
                         /var/spool/cron/USERNAME
                                分钟   小时    天   月   周     用户     任务   
                
            时间的有效取值：
                    分钟：0 - 59
                    小时：0 - 23
                    天： 1 -31
                    月： 1-12
                    周： 0 - 7,0和7都表示周日
            
           时间统配表示：
                    *：对应的所有有效取值

                        3  *　＊　＊　＊
                        3  *    *     *    7
                        13  12  *   *   5
                    ,：离散时间点
                            10,40 * * * *  2,5             表示半小时任务
                    —：表示连续时间点
                            10 02 * * 1-5
                   /：对应取值范围内每多久一次
                            */3 * * * *                     每3分钟一次的任务
                            
                                 
每2小时执行一次：
        08 */2 * * *                                        表示每2小时执行一次
        10 04 */2 * *                                       每2天执行一次
        
        
        
执行结果将以邮件形式发送给管理员：
                    */3 * * * *  cat /etc/fstab &> /dev/null


cron的环境变量：cron执行所有命都去PATH环境变量指定的路径下去找
            PATH   /bin   /sbin  
       

用户任务的管理：
        crontab
                -l： 列出当前用户的所有任务
                -e：编辑
                -r：移除所有任务
                -u：USERNAME   管理其它用户的cron任务
                              
       crontab -e
       */3 * * * *  /bin/echo "how are you?"
       
       
       anacron：   对于cron的补充
                                     

系统cron
/etc/crontab
每一行用于定义一个任务，7个字段
1 1 1 * * root /bin/echo  "hello world"
分钟：0-59

用户cron：/var/spool/cron/USERNAME
每一行定义一个任务，6个字段

时间点的通配符
        *：表示全部有效值
        10 2 * * *


crontab 
    -l  : 列出所有的任务
    -e：编辑
    -r ： 移除所有任务
    -u username ：   

crontab -u hadoop -e        为hadoop用户编辑任务


/etc/anacrontab


```